{"version":3,"file":"static/js/158.b1f64d2c.chunk.js","mappings":"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","sources":["atoms.js","components/post/ItemImage.js","components/form/editInput/ItemEditForm.js","routes/ItemEdit.js","styles/ItemPost.style.js"],"sourcesContent":["import { atom } from \"recoil\";\n\nexport const editState = atom({\n  key: \"editState\",\n  default: false,\n});\n\nexport const loginState = atom({\n  key: \"loginState\",\n  default: false,\n});\n\nexport const userState = atom({\n  key: \"userState\",\n  default: false,\n});\n\nexport const itemPostState = atom({\n  key: \"itemPostState\",\n  default: {\n    products: \"\",\n    location: \"\",\n    purchase: \"\",\n    descript: \"\",\n    createdAt: \"\",\n  },\n});\n\nexport const quantityState = atom({\n  key: \"quantityState\",\n  default: 0,\n});\n\nexport const wishPostState = atom({\n  key: \"wishPostState\",\n  default: {\n    products: \"\",\n    price: 0,\n    descript: \"\",\n  },\n});\n\nexport const changedState = atom({\n  key: \"changedState\",\n  default: false,\n});\n\nexport const getItemsState = atom({\n  key: \"getItemsState\",\n  default: [],\n});\n\nexport const getWishState = atom({\n  key: \"getWishState\",\n  default: [],\n});\n\nexport const itemCategoryState = atom({\n  key: \"itemCategoryState\",\n  default: [],\n});\n\nexport const methodCategoryState = atom({\n  key: \"methodCategoryState\",\n  default: [\n    {\n      key: 0,\n      value: \"온라인\",\n    },\n    {\n      key: 1,\n      value: \"오프라인\",\n    },\n    {\n      key: 2,\n      value: \"기타\",\n    },\n  ],\n});\n","import React from \"react\";\n\nfunction ItemImage({ setFile, percent, image }) {\n  // const [isEdit, setIsEdit] = useRecoilState(editState);\n\n  const handleChange = (event) => {\n    setFile(event.target.files[0]);\n  };\n\n  return (\n    <div>\n      <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\n\n      <span>{percent} \"% 완료\"</span>\n    </div>\n  );\n}\n\nexport default ItemImage;\n","import React, { useEffect, useState } from \"react\";\nimport { itemCategoryState, methodCategoryState } from \"atoms\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nimport { collection, getDocs } from \"firebase/firestore\";\nimport { db } from \"../../../firebase\";\nimport { useNavigate } from \"react-router-dom\";\nimport { GoBack } from \"styles/ItemPost.style\";\nimport ItemImage from \"components/post/ItemImage\";\n\nfunction ItemEditForm({\n  item,\n  setItem,\n  itemCategValue,\n  onChangeICateg,\n  methodCategValu,\n  onChangeMCateg,\n  setFile,\n}) {\n  const [itemCategory, setItemCategory] = useRecoilState(itemCategoryState);\n  const methodCategory = useRecoilValue(methodCategoryState);\n\n  console.log(methodCategory);\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const getItemCategData = async () => {\n      const data = await getDocs(collection(db, \"itemCateg\"));\n      setItemCategory(\n        data.docs.map((doc) => ({\n          ...doc.data(),\n          id: doc.id,\n        }))\n      );\n    };\n    getItemCategData();\n  }, [setItemCategory, itemCategory]);\n\n  console.log(itemCategory);\n\n  const onChangeValue = (e) => {\n    setItem({\n      ...item,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  return (\n    <>\n      <h1>수정페이지</h1>\n      <img src={item.productsImg} alt=\"\" />\n      <ItemImage setFile={setFile} />\n      <div>\n        <label>물품명: </label>\n        <input name=\"products\" value={item.products} onChange={onChangeValue} />\n      </div>\n      <div>\n        <label>카테고리: </label>\n        <select value={itemCategValue} onChange={onChangeICateg}>\n          {itemCategory.map((categ) => (\n            <option value={categ.category}>{categ.category}</option>\n          ))}\n        </select>\n      </div>\n      <div>\n        <label>수량: </label>\n        <input\n          type=\"number\"\n          name=\"quantity\"\n          value={item.quantity}\n          onChange={onChangeValue}\n        />\n      </div>\n      <div>\n        <label>보관위치: </label>\n        <input\n          name=\"storageLocation\"\n          value={item.storageLocation}\n          onChange={onChangeValue}\n        />\n      </div>\n      <div>\n        <label>구매처: </label>\n        <input name=\"purchase\" value={item.purchase} onChange={onChangeValue} />\n      </div>\n      <div>\n        <label>구매방법: </label>\n        <select value={methodCategValu} onChange={onChangeMCateg}>\n          {methodCategory.map((method) => (\n            <option value={method.value}>{method.value}</option>\n          ))}\n        </select>\n      </div>\n      <div>\n        <label>설명: </label>\n        <textarea\n          name=\"descript\"\n          value={item.descript}\n          onChange={onChangeValue}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">Update</button>\n        <GoBack onClick={() => navigate(-1)}>뒤로가기</GoBack>\n      </div>\n    </>\n  );\n}\n\nexport default ItemEditForm;\n","import { getItemsState } from \"atoms\";\nimport { db, storage } from \"../firebase\";\nimport { doc, updateDoc } from \"firebase/firestore\";\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { useRecoilState } from \"recoil\";\nimport ItemEditForm from \"components/form/editInput/ItemEditForm\";\nimport { getDownloadURL, ref, uploadBytesResumable } from \"firebase/storage\";\n\nfunction ItemEdit() {\n  const [targetId, setTargetId] = useState({});\n  const [getItems, setGetItems] = useRecoilState(getItemsState);\n\n  const [itemCategValue, setItemCategValue] = useState(targetId.category);\n  const [methodCategValue, setMethodCategValue] = useState(\n    targetId.purchaseMethod\n  );\n\n  const [file, setFile] = useState(\"\");\n  const [imgUrl, setImgUrl] = useState(\"\");\n  const [percent, setPercent] = useState(0);\n\n  const onChangeICateg = (e) => {\n    setItemCategValue(e.target.value);\n  };\n  const onChangeMCateg = (e) => {\n    setMethodCategValue(e.target.value);\n  };\n\n  const { id } = useParams();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (getItems.length > 0) {\n      const targetItem = getItems.find((item) => item.id === id);\n      console.log(targetItem);\n      if (targetItem) {\n        setTargetId(targetItem);\n      }\n    }\n  }, [getItems, id]);\n\n  const onUpdateItem = async (e) => {\n    e.preventDefault();\n    const editRef = doc(db, \"items\", targetId.id);\n    try {\n      const storageRef = ref(storage, `/files/${file.name}`);\n      const uploadTask = uploadBytesResumable(storageRef, file);\n\n      uploadTask.on(\n        \"state_changed\",\n        (snapshot) => {\n          const percent = Math.round(\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n          );\n\n          setPercent(percent);\n        },\n        (err) => console.log(err),\n        () => {\n          // download url\n          getDownloadURL(uploadTask.snapshot.ref).then((url) => {\n            setImgUrl(url);\n          });\n        }\n      );\n\n      if (percent === 100) {\n        await updateDoc(editRef, {\n          ...targetId,\n          category: itemCategValue,\n          purchaseMethod: methodCategValue,\n          productsImg: imgUrl,\n        });\n        console.log(editRef.id);\n\n        alert(\"수정이 완료되었습니다.\");\n        navigate(`/item-detail/${targetId.id}`);\n      }\n    } catch (error) {\n      console.error(error.message);\n    } finally {\n      console.log(\"End\");\n    }\n  };\n\n  return (\n    <div>\n      <form onSubmit={onUpdateItem}>\n        <ItemEditForm\n          item={targetId}\n          setItem={setTargetId}\n          itemCategValue={itemCategValue}\n          methodCategValue={methodCategValue}\n          onChangeICateg={onChangeICateg}\n          onChangeMCateg={onChangeMCateg}\n          setFile={setFile}\n        />\n      </form>\n    </div>\n  );\n}\n\nexport default ItemEdit;\n","import styled from 'styled-components';\n\nexport const Wrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const Form = styled.form`\n  width: 90vw;\n  height: 90vh;\n  margin-top: 20px;\n  border: 1px solid blue;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\n\n\nexport const Header = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\n\n\nexport const Main = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const Footer = styled.div`\n  display: flex;\n`;\n\n\nexport const PostBtn = styled.input`\n  padding: 5px 10px;\n  border: none;\n  border-radius: 5px;\n  background-color: #2986F5;\n  color: #fff;\n  cursor: pointer;\n`;\n\nexport const GoBack = styled.button`\n  padding: 5px 10px;\n  border: none;\n  border-radius: 5px;\n  background-color: #F9567A;\n  color: #fff;\n  margin-right: 20px;\n  cursor: pointer;\n`;\n\n"],"names":["editState","atom","key","default","loginState","userState","itemPostState","products","location","purchase","descript","createdAt","quantityState","wishPostState","price","changedState","getItemsState","getWishState","itemCategoryState","methodCategoryState","value","setFile","percent","image","type","accept","onChange","event","target","files","item","setItem","itemCategValue","onChangeICateg","methodCategValu","onChangeMCateg","useRecoilState","itemCategory","setItemCategory","methodCategory","useRecoilValue","console","log","navigate","useNavigate","useEffect","getItemCategData","getDocs","collection","db","data","docs","map","doc","id","onChangeValue","e","name","src","productsImg","alt","ItemImage","categ","category","quantity","storageLocation","method","onClick","useState","targetId","setTargetId","getItems","setItemCategValue","purchaseMethod","methodCategValue","setMethodCategValue","file","imgUrl","setImgUrl","setPercent","useParams","length","targetItem","find","onUpdateItem","preventDefault","editRef","storageRef","ref","storage","uploadTask","uploadBytesResumable","on","snapshot","Math","round","bytesTransferred","totalBytes","err","getDownloadURL","then","url","updateDoc","alert","error","message","onSubmit","Wrapper","styled","Form","Header","Main","Footer","PostBtn","GoBack"],"sourceRoot":""}